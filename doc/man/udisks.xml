<refentry id="udisks.8">
  <refentryinfo>
    <title>udisks</title>
    <date>March 2008</date>
    <productname>udisks</productname>
  </refentryinfo>

  <refmeta>
    <refentrytitle>udisks</refentrytitle>
    <manvolnum>8</manvolnum>
    <refmiscinfo class="version"></refmiscinfo>
  </refmeta>

  <refnamediv>
    <refname>udisks</refname>
    <refpurpose>Disk Manager</refpurpose>
  </refnamediv>

  <refsect1><title>DESCRIPTION</title>
    <para>
      udisks provides interfaces to enumerate and perform operations
      on disks and storage devices. Any application (including
      unprivileged ones) can access the
      <citerefentry><refentrytitle>udisksd</refentrytitle><manvolnum>8</manvolnum></citerefentry>
      daemon via the name <emphasis>org.freedesktop.UDisks2</emphasis>
      on the system message bus. In addition to the D-Bus API, a
      library, <filename>libudisks2</filename> is also provided. This
      library can be used from C/C++ and any high-level language with
      <ulink
      url="https://live.gnome.org/GObjectIntrospection">GObjectIntrospection</ulink>
      support such as Javascript and Python.
      udisks is only indirectly involved in what devices and objects
      are shown in the user interface. See these
      <ulink url="http://git.gnome.org/browse/gvfs/tree/monitor/udisks2/what-is-shown.txt">notes</ulink>
      for what is shown in GNOME 3.
    </para>
  </refsect1>

  <refsect1><title>ACCESS CONTROL</title>
    <para>
      By default, logged-in users in active log-in sessions are
      permitted to perform operations (for example, mounting,
      unlocking or modifying) on devices attached to the seat their
      session is on. Access-control is fine-grained and based on
      <citerefentry><refentrytitle>polkit</refentrytitle><manvolnum>8</manvolnum></citerefentry>,
      see the <quote><link
      linkend="udisks-polkit-actions">Authorization
      Checks</link></quote> chapter in the udisks documentation for
      more information (<ulink
      url="http://udisks.freedesktop.org/docs/latest/udisks-polkit-actions.html">available
      online here</ulink>).
      Note that the <literal>x-udisks-auth</literal> option can be
      used in the <filename>/etc/fstab</filename> and
      <filename>/etc/crypttab</filename> files to specify that
      additional authorization is required to mount resp. unlock the
      device (typically requiring the user to authenticate as an
      administrator).
    </para>
  </refsect1>

  <refsect1>
    <title>DEVICE INFORMATION</title>
    <para>
      udisks relies on recent versions of
      <citerefentry><refentrytitle>udev</refentrytitle><manvolnum>7</manvolnum></citerefentry>
      and the Linux kernel. Influential device properties in the udev
      database include:
    </para>
    <variablelist>
      <varlistentry>
        <term><option>UDISKS_SYSTEM</option></term>
        <listitem>
          <para>
            If set, this overrides the value of the
            <link linkend="gdbus-property-org-freedesktop-UDisks2-Block.HintSystem">HintSystem</link> property.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>UDISKS_IGNORE</option></term>
        <listitem>
          <para>
            If set, this overrides the value of the
            <link linkend="gdbus-property-org-freedesktop-UDisks2-Block.HintIgnore">HintIgnore</link> property.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>UDISKS_AUTO</option></term>
        <listitem>
          <para>
            If set, this overrides the value of the
            <link linkend="gdbus-property-org-freedesktop-UDisks2-Block.HintAuto">HintAuto</link> property.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>UDISKS_NAME</option></term>
        <listitem>
          <para>
            The name to use for the device when presenting it in an user interface.
            This corresponds to the
            <link linkend="gdbus-property-org-freedesktop-UDisks2-Block.HintName">HintName</link> property.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>UDISKS_ICON_NAME</option></term>
        <listitem>
          <para>
            The icon to use for the device when presenting it in an user interface. If
            set, the name must adhere to the
            <ulink url="http://www.freedesktop.org/wiki/Specifications/icon-theme-spec">freedesktop.org icon theme specification</ulink>.
            This corresponds to the
            <link linkend="gdbus-property-org-freedesktop-UDisks2-Block.HintIconName">HintIconName</link> property.
          </para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term><option>ID_SEAT</option></term>
        <listitem>
          <para>
            The physical seat the device is attached to. If unset or
            set to the empty string, <quote>seat0</quote> (the first
            seat) is assumed.
          </para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsect1>

  <refsect1><title>API STABILITY</title>
    <para>
      udisks guarantees a stable D-Bus API within the same major
      version and this guarantee also extends to the client-side
      library <filename>libudisks2</filename>. Additionally, several
      major versions of udisks can be installed and operate at the
      same time although interoperability may be limited - for
      example, a device mounted using the udisks N.x API may require
      additional authorization if attempting to unmount it through the
      the (N-1).x API.
    </para>
    <para>
      The udisks developers do not anticipate breaking API but does
      reserve the right to do so and if it happens, promises to bump
      the major version and ensure the new major version of udisks is
      parallel-installable with any older major version. However, note
      that programs, man pages and other artifacts may change name
      (for example, adopt a <quote>2</quote> suffix) to make room for
      the next major version. Therefore, applications can not rely on
      tools like e.g.
      <link linkend="udisksctl.1"><citerefentry><refentrytitle>udisksctl</refentrytitle><manvolnum>1</manvolnum></citerefentry></link>
      to be available. Additionally, there is no guarantee that the
      options, command-line switches etc. of command-line tools or
      similar will remain stable.
    </para>
    <para>
      Instead, applications should only use the D-Bus API, the
      <filename>libudisks2</filename> library or tools such as
      <citerefentry>
        <refentrytitle>dbus-send</refentrytitle><manvolnum>1</manvolnum>
      </citerefentry>
      or
      <citerefentry>
        <refentrytitle>gdbus</refentrytitle><manvolnum>1</manvolnum>
      </citerefentry>
      to interact with
      <citerefentry><refentrytitle>udisksd</refentrytitle><manvolnum>8</manvolnum></citerefentry>.
    </para>
  </refsect1>

  <refsect1><title>AUDIENCE</title>
    <para>
      The intended audience of udisks include operating system
      developers working on the higher-level parts of the operating
      system, for example the desktop shell (such as <ulink
      url="http://www.gnome.org">GNOME</ulink>) and disk management
      applications (e.g. GNOME's <ulink
      url="https://live.gnome.org/Design/Apps/Disks">Disks</ulink>
      application).  Software on this level typically depend on a
      specific (major) version of udisks and may even have support for
      previous versions of udisks or alternative interfaces performing
      the same role as udisks.
    </para>
    <para>
      While udisks indeed provides a stable API and a clear upgrade
      path, it may not be an appropriate dependency for third party
      applications. For example, if the operating system switches to
      udisks version N.x and an application is still using the udisks
      (N-1).x API, the application will not work unless udisks (N-1).x
      is installed. While this situation is still workable (since both
      udisks N.x and udisks (N-1).x can be installed) it may not be
      desirable to ask the user to install the old version - in fact,
      the operating system vendor may not even provide a packaged
      version of the old version. Hence, if an application does not
      want to tie itself to a specific version of the operating
      system, it should not use udisks.
    </para>
    <para>
      Viable alternatives to udisks are APIs that are guaranteed to be
      around for longer time-frames, including:
      <itemizedlist>
        <listitem>
          <para>
            Low-level APIs and commands such as e.g.
            <ulink url="http://en.wikipedia.org/wiki/Sysfs">sysfs</ulink>,
            <ulink url="http://www.freedesktop.org/software/systemd/libudev/">libudev</ulink>,
            <ulink url="http://www.kernel.org/doc/Documentation/filesystems/proc.txt">/proc/self/mountinfo</ulink> and
            <ulink url="http://en.wikipedia.org/wiki/Util-linux">util-linux</ulink>.
          </para>
        </listitem>
        <listitem>
          <para>
            High-level APIs such as <ulink url="http://developer.gnome.org/gio/stable/volume_mon.html">GVolumeMonitor</ulink>.
          </para>
        </listitem>
      </itemizedlist>
      In particular, for desktop applications it is a much better idea
      to use something like GVolumeMonitor since it will make the
      application show the same devices as the desktop shell
      (e.g. file manager, file chooser and so on) is showing.
    </para>
  </refsect1>

  <refsect1><title>AUTHOR</title>
    <para>
      Written by David Zeuthen <email>zeuthen@gmail.com</email> with
      a lot of help from many others.
    </para>
  </refsect1>

  <refsect1>
    <title>BUGS</title>
    <para>
      Please send bug reports to either the distribution bug tracker
      or the upstream bug tracker at
      <ulink url="http://bugs.freedesktop.org/enter_bug.cgi?product=udisks"/>.
    </para>
  </refsect1>

  <refsect1>
    <title>SEE ALSO</title>
    <para>
      <citerefentry>
        <refentrytitle>udev</refentrytitle><manvolnum>7</manvolnum>
      </citerefentry>,
      <citerefentry>
        <refentrytitle>polkit</refentrytitle><manvolnum>8</manvolnum>
      </citerefentry>,
      <link linkend="udisksd.8"><citerefentry><refentrytitle>udisksd</refentrytitle><manvolnum>8</manvolnum></citerefentry></link>,
      <link linkend="udisksctl.1"><citerefentry><refentrytitle>udisksctl</refentrytitle><manvolnum>1</manvolnum></citerefentry></link>
    </para>
  </refsect1>
</refentry>
